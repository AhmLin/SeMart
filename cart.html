<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Keranjang Belanja - SeMart</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/cart.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
</head>
<body>

  <header class="navbar">
      <div class="container nav-content">
          <div class="logo">
              <img src="logo2.png" alt="SeMart Logo" width="30px">
              <h1>SeMart</h1>
          </div>
          <div class="search">
              <div class="textinput">
                  <input type="text" placeholder="Cari Produk" id="search-input" aria-label="Cari produk">
              </div>
              <button type="button" id="search-btn">Cari</button>
          </div>
          <nav class="right-nav">
              <ul class="nav-links">
                  <li><a href="index.html">Beranda</a></li>
                  <li><a href="products.html">Produk</a></li>
                  <li><a href="#">Tentang</a></li>
                  <li><a href="#">Kontak</a></li>
              </ul>
              <div class="cart-section">
                <a href="cart.html" class="cart-link">
                    <div class="cart-info">
                        <div class="cart-total-price">
                            Rp<span id="nav-cart-total">0</span>
                        </div>
                        <div class="cart-icon-with-count">
                            üõí
                            <span class="cart-count" id="nav-cart-count">0</span>
                        </div>
                    </div>
                </a>
            </div>
            
            <!-- üîπ AUTH SECTION -->
            <div class="nav-auth" id="nav-auth">
              <a href="login.html" class="btn-login">Login</a>
              <a href="signup.html" class="btn-signup">Daftar</a>
            </div>
            
            <div class="user-menu" id="user-menu" style="display: none;">
              <div class="user-profile">
                <div class="user-avatar">
                   <img src="https://cdn-icons-png.flaticon.com/512/747/747545.png" style="width:60%; filter: brightness(0) invert(1);">
                </div>
                <div class="user-info">
                  <span class="user-greeting">Halo, <span id="user-name">User</span></span>
                  <span class="user-email" id="user-email"></span>
                  <div class="user-dropdown">
                    <a href="profile.html" class="dropdown-item">üìã Profil Saya</a>
                    <a href="orders.html" class="dropdown-item">üì¶ Pesanan Saya</a>
                    <a href="wishlist.html" class="dropdown-item">‚ù§Ô∏è Wishlist</a>
                    <div class="dropdown-divider"></div>
                    <a href="#" id="logout-btn" class="dropdown-item logout">üö™ Logout</a>
                  </div>
                </div>
              </div>
            </div>
          </nav>
      </div>
  </header>
        

    <div class="backpage">
        <a href="index.html" class="back-btn">‚Üê ke Beranda</a>
    </div>

    <main>
        <section class="cart-page">
            <div class="container">
                <h1 class="page-title">Keranjang Belanja</h1>
                
                <div class="cart-content">
                    <!-- Empty State -->
                    <div class="empty-cart" id="empty-cart">
                        <div class="empty-cart-icon">üõí</div>
                        <h2>Keranjang Belanja Kosong</h2>
                        <p>Belum ada produk yang ditambahkan ke keranjang</p>
                        <a href="products.html" class="btn btn-primary">Mulai Belanja</a>
                    </div>

                    <!-- Cart Items -->
                    <div class="cart-items-container" id="cart-items-container" style="display: none;">
                        <div class="cart-layout">
                            <!-- Kiri: Daftar Produk -->
                            <div class="cart-items-section">
                                <div class="cart-items-header">
                                    <h2>Produk dalam Keranjang</h2>
                                    <button class="btn-clear-all" id="clear-cart">Hapus Semua</button>
                                </div>
                                
                                <div class="cart-items" id="cart-items">
                                    <!-- Cart items akan diisi JavaScript -->
                                </div>
                            </div>

                            <!-- Kanan: Form Informasi Pengiriman -->
                            <div class="shipping-info-section">
                                <div class="shipping-info-card">
                                    <h3>Informasi Pengiriman</h3>
                                    
                                    <form id="shipping-form" class="shipping-form">
                                        <!-- Nama Penerima -->
                                        <div class="form-group">
                                            <label for="recipient-name">Nama Penerima *</label>
                                            <input 
                                                type="text" 
                                                id="recipient-name" 
                                                name="recipient-name" 
                                                placeholder="Masukkan nama penerima"
                                                required
                                            >
                                        </div>

                                        <!-- Nomor Telepon -->
                                        <div class="form-group">
                                            <label for="recipient-phone">Nomor Telepon *</label>
                                            <input 
                                                type="tel" 
                                                id="recipient-phone" 
                                                name="recipient-phone" 
                                                placeholder="Contoh: 081234567890"
                                                required
                                            >
                                        </div>

                                        <!-- Alamat Lengkap -->
                                        <div class="form-group">
                                            <label for="shipping-address">Alamat Lengkap *</label>
                                            <textarea 
                                                id="shipping-address" 
                                                name="shipping-address" 
                                                rows="3" 
                                                placeholder="Masukkan alamat lengkap pengiriman (jalan, nomor, RT/RW, kelurahan, kecamatan)"
                                                required
                                            ></textarea>
                                        </div>

                                        <!-- Kota & Kode Pos -->
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="city">Kota *</label>
                                                <input 
                                                    type="text" 
                                                    id="city" 
                                                    name="city" 
                                                    placeholder="Nama kota"
                                                    required
                                                >
                                            </div>
                                            <div class="form-group">
                                                <label for="postal-code">Kode Pos *</label>
                                                <input 
                                                    type="text" 
                                                    id="postal-code" 
                                                    name="postal-code" 
                                                    placeholder="Contoh: 12345"
                                                    required
                                                >
                                            </div>
                                        </div>

                                        <!-- Kode Promo -->
                                        <div class="form-group">
                                            <label for="promo-code">Kode Promo (Opsional)</label>
                                            <div class="promo-input-group">
                                                <input 
                                                    type="text" 
                                                    id="promo-code" 
                                                    name="promo-code" 
                                                    placeholder="Masukkan kode promo"
                                                >
                                                <button type="button" id="apply-promo" class="btn-apply-promo">Terapkan</button>
                                            </div>
                                            <div id="promo-message" class="promo-message"></div>
                                        </div>

                                        <!-- Catatan Pesanan -->
                                        <div class="form-group">
                                            <label for="order-notes">Catatan Pesanan (Opsional)</label>
                                            <textarea 
                                                id="order-notes" 
                                                name="order-notes" 
                                                rows="2" 
                                                placeholder="Contoh: Tolong dibungkus rapat, atau pesan khusus lainnya"
                                            ></textarea>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Ringkasan Belanja -->
                        <div class="cart-summary">
                            <h3>Ringkasan Belanja</h3>
                            
                            <div class="summary-row">
                                <span>Subtotal:</span>
                                <span>Rp<span id="subtotal">0</span></span>
                            </div>
                            
                            <!-- Diskon dari Promo -->
                            <div class="summary-row discount-row" id="discount-row" style="display: none;">
                                <span>Diskon:</span>
                                <span>- Rp<span id="discount-amount">0</span></span>
                            </div>
                            
                            <div class="summary-row">
                                <span>Ongkos Kirim:</span>
                                <span>Rp<span id="shipping">0</span></span>
                            </div>
                            
                            <div class="summary-row total">
                                <span>Total:</span>
                                <span>Rp<span id="total-price">0</span></span>
                            </div>
                            
                            <div class="checkout-actions">
                                <a href="products.html" class="btn-continue">Lanjutkan Belanja</a>
                                <button class="btn-checkout" id="checkout">Checkout Sekarang</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <section style="display: flex; align-items: center; gap: 10px;">
                        <img src="logo2.png" alt="SeMart" style="width: 30px;">
                        <h2 style="font-size: 20px;">SeMart</h2>
                    </section>
                    <p>Belanja cerdas, dukung produk lokal bersama SeMart.</p>
                </div>
            </div>
            <div class="footer-copyright">
                <p>&copy; 2025 SeMart Store</p>
            </div>
        </div>
    </footer>

    <script src="js/cart.js"></script>
    <script src="js/search.js"></script>
    <!-- Load global auth system untuk semua page -->
    <script src="js/auth-system.js"></script>
    <script type="module" src="js/firebase-auth.js"></script>
</body>
</html>
